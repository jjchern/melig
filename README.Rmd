---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

[![Travis-CI Build Status](https://travis-ci.org/jjchern/melig.svg?branch=master)](https://travis-ci.org/jjchern/melig)

# About `melig`

The R package `melig` contains information on **M**edicaid income **elig**ibility limits, collected by [the Kaiser Family Foundation](http://kff.org/data-collection/trends-in-medicaid-income-eligibility-limits/). It includes the following datasets:

- `children.rda`: 
    - [Medicaid and CHIP Income Eligibility Limits for Children, 2000-2016](http://kff.org/medicaid/state-indicator/medicaidchip-upper-income-eligibility-limits-for-children/)
    - [Medicaid Income Eligibility Limits for Infants Ages 0 – 1, 2000-2016](http://kff.org/medicaid/state-indicator/medicaid-income-eligibility-limits-for-infants-ages-0-1/)
    - [Medicaid Income Eligibility Limits for Children Ages 1 – 5, 2000-2016](http://kff.org/medicaid/state-indicator/medicaid-income-eligibility-limits-for-children-ages-1-5/)
    - [Medicaid Income Eligibility Limits for Children Ages 6-18, 2000-2016](http://kff.org/medicaid/state-indicator/medicaid-income-eligibility-limits-for-children-ages-6-18/)
    - [Separate Children’s Health Insurance Program (CHIP) Income Eligibility Limits for Children, 2000-2016](http://kff.org/medicaid/state-indicator/separate-childrens-health-insurance-program-chip-income-eligibility-limits-for-children/)
    
- `prenant_wom.rda`: [Medicaid and CHIP Income Eligibility Limits for Pregnant Women, 2003-2016](http://kff.org/medicaid/state-indicator/medicaid-and-chip-income-eligibility-limits-for-pregnant-women/)
- `parents.rda`: [Medicaid Income Eligibility Limits for Parents, 2002-2016](http://kff.org/medicaid/state-indicator/medicaid-income-eligibility-limits-for-parents/)
- `childless_adults.rda`:  [Medicaid Income Eligibility Limits for Other Non-Disabled Adults, 2011-2016](http://kff.org/medicaid/state-indicator/medicaid-income-eligibility-limits-for-other-non-disabled-adults/)

The datasets have been [tidied](http://vita.had.co.nz/papers/tidy-data.pdf).

The [`/data-raw/`](https://github.com/jjchern/melig/tree/master/data-raw) folder contains raw data and R scripts.

# Useful Links

- [Medicaid Income Eligibility Limits (Most Recent Data)](http://kff.org/state-category/medicaid-chip/medicaidchip-eligibility-limits/)
- [Annual Updates on Eligibility Rules, Enrollment and Renewal Procedures, and Cost-Sharing Practices in Medicaid and CHIP](http://kff.org/medicaid/report/annual-updates-on-eligibility-rules-enrollment-and/)

# Installing the Package

```R
# install.packages("devtools")
devtools::install_github("jjchern/melig")
```

# Usage

## Long and Wide Formats

```{r, message=FALSE, warning=FALSE}
library(dplyr)

# the datasets have been tidied
melig::parents

# but you can covert it back to the original wide format
melig::parents %>% 
  tidyr::unite_("monyear", c("month", "year"), sep = " ") %>% 
  tidyr::spread(monyear, cutoff)
```

## States that Have Income Cutoff Greater Than 100 Federal Poverty Guidelines in 2014

```{r, message=FALSE, warning=FALSE}
# for parents
melig::parents %>% 
  filter(year == 2014) %>% 
  filter(cutoff >= 100) %>% 
  select(state, fips, usps, pa_cutoff = cutoff) %>% 
  pander::pander()

# for childless adults
melig::childless_adults %>% 
  filter(year == 2014) %>% 
  filter(cutoff >= 100) %>% 
  select(state, fips, usps, ca_cutoff = cutoff) %>% 
  pander::pander()
```

## Income Cutoffs for Children

_Note_: The children dataset, `melig::children`, has 

- a `type` variable that separates Medicaid and CHIP programs, and 
- an `agegrp` variable that indicates specific age groups.

Because the age information for the CHIP programs (`type == CHIP`) is not available from the source data, I assign a value of "0-18" to the corresponding `age` variable, though some states' CHIP programs don't cover all children under age 19 in some years.

```{r, message=FALSE, warning=FALSE}
# the data
melig::children

# IL
melig::children %>% 
  filter(usps == "IL") 
```

## Save as Other Data Formats

```r
# save as Stata format
haven::write_dta(melig::parents, "pa0216.dta")

# or
rio::export(melig::parents, "pa0216.dta")
```

Or download the `*.rda` file and try the [rioweb](https://lbraglia.shinyapps.io/rioweb) made by [@lbraglia](https://github.com/lbraglia).

